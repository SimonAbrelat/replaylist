<!doctype html>
<html lang="en">
    <head>
        <title>replaylist | recorder</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/style.css">
        <script src="./js/API.js"></script>
        <script src="./js/app.js"></script>
        <script>
        var s;
        var all_playlists;
        var curr_history;
        var playlist;
        (async () => {
            //console.log("Version 0.11");
            
            let tok = sessionStorage.getItem("tok");
            let id = await getId(tok);
            s = new Spotify(tok, id);

            all_playlists = await s.getPlaylists();
            playlist = await getRePlaylists(s);
            curr_history = await getHistory(s);
            setPlaylists(playlist);
            setHistory(curr_history);
        })();
        </script>
    </head>

    <body>
        <div class="container">
            <div class="logo"><img src="./res/logo.png" alt="replaylist logo"></div>
            <div class="header"><h1>replaylist</h1></div>
            <div class="logout">
                <button class="btn" onclick="logOut()">log out</button>
            </div>

            <div class="dropdown">
                <div>choose your playlist</div>
                <p></p>
                <select name="playlists" id="playlists" onchange="addNewPL(all_playlists, s)">
                  <!--
                    <option></option>
                    <option>rock for chads</option>
                    <option>bops</option>
                    <option>2cool4school</option>
                    <option>sad songs</option>
                  -->
                  <option style="background-color:#e89173">+ add playlist</option>
                </select>
            </div>

            <div class="ui">
                <!--
                <button class="btn" style="margin:0.5em" onclick="addToPL(s, getPLID(playlist), curr_history[0].map(r => r.track.uri))">push</button>
                -->
                <button class="btn" style="margin:0.5em" onclick="updatePL(s, getPLID(playlist), curr_history[0])">push</button>
                <button class="btn" style="margin:0.5em">record</button>
                <button class="btn" style="margin:0.5em">pause</button>
            </div>

            <div class="history">
                <div>history</div>
                <p></p>                
                <select size="6" id="historys">
                  <!--option>Option 1</option>
                  <option>Option 2</option>
                  <option>Option 3</option>
                  <option>Option 3 asdfasdf</option>
                  <option>Option 3 asdf</option>
                  <option>Option 3 294873</option>
                  <option>Option 3 306857649567</option-->
                </select>

            </div>
            <div class="footer">
                created with lots of love and coffee |
		        <a href="https://github.com/SimonAbrelat/replaylist">GitHub</a>
            </div>
        </div>
    </body>
    
</html>

